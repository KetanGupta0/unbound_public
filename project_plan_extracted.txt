MODULE 1 Content:
MODULE 1AUTHENTICATION, AUTHORIZATION & TOKEN LIFECYCLE(FastAPI ‚Äì API Core Module)1. SYSTEM SCOPE & APPLICABILITYSystem Scope:api.domain.com (FastAPI backend)Applies To:Admin PanelInstructor PanelStudent PanelPublic Website (read-only access only)This module governs all identity, access, and permission decisions across the platform.‚ö†Ô∏è Golden Rule:No frontend module (Admin / Instructor / Student / Public) is allowed to override, bypass, or reinterpret the rules defined in this module.2. OBJECTIVE OF THIS MODULEThe objective of this module is to:Define who a user isDefine how a user proves identityDefine what a user is allowed to doDefine how access is revokedEnsure stateless, scalable, and secure access controlThis module is the foundation of system security.If this module is weak or unclear, the entire system becomes unsafe.3. CORE SECURITY PHILOSOPHY3.1 API as the Single AuthorityAll authentication and authorization decisions happen only at API levelFrontend applications are considered:UntrustedModifiablePotentially compromisedFrontend is a viewer and request sender, never a decision maker.3.2 Stateless DesignNo server-side sessionsNo cookiesNo shared memory between requestsEvery request must prove its legitimacy independentlyThis enables:Horizontal scalingMicroservice readinessNo sticky sessionsEasy load balancing4. TECHNOLOGY STACK (AUTH MODULE)Framework: FastAPILanguage: Python 3.11+Auth Type: Stateless JWTValidation: Pydantic v2Password Hashing: bcrypt or argon2Transport: HTTPS onlyServer: Uvicorn (ASGI)5. USER IDENTITY SOURCE5.1 Master Identity TableAll users originate from:auth_schema.usersThis table is the only source of truth for identity.5.2 User Identity FieldsEach user is uniquely identified by:FieldDescriptionuser_idUUID (primary identifier)emailUnique login identifierpassword_hashSecurely hashed passwordroleadmin / instructor / studentstatusactive / pending / blockedtoken_versionInteger for global token invalidationcreated_atAccount creation timestamp‚ö†Ô∏è User role and status are never trusted from client input.6. AUTHENTICATION MODEL OVERVIEW6.1 Authentication TypeToken-based authenticationJSON Web Tokens (JWT)StatelessSigned using server secret or private key6.2 Why JWT Is UsedJWT is chosen because it:Works across multiple subdomainsDoes not require server-side session storageIs compatible with:Web appsMobile appsFuture third-party integrationsSupports fast verificationScales horizontally without coordination7. LOGIN FLOW (STEP-BY-STEP)7.1 Login EndpointPOST /api/v1/auth/login7.2 Login SequenceUser submits:EmailPasswordAPI validates request payloadAPI checks:User existsPassword hash matchesAccount status is not blockedAPI determines user roleAPI issues JWT access tokenToken is returned to clientClient stores token securelyToken is attached to every subsequent request7.3 Failed Login RulesNo field-level error disclosureSame error message for:Invalid emailInvalid passwordPrevents credential enumeration attacks8. JWT TOKEN STRUCTURE8.1 Token Claims (Payload)Each JWT contains:ClaimPurposeuser_idIdentifies the userroleRole-based authorizationstatusAccount status validationtoken_versionGlobal invalidation controliatIssued at timestampexpExpiry timestamp8.2 Token CharacteristicsDigitally signedCannot be modified client-sideVerified on every requestRejected if:Signature invalidExpiredtoken_version mismatchAccount blocked9. TOKEN EXPIRY POLICY9.1 Access Token RulesTokens are short-livedExpired tokens are rejected immediatelyNo silent refresh in v1User must re-authenticate after expiry9.2 Expiry BehaviorConditionResultToken expired401 UnauthorizedToken tampered401 UnauthorizedToken invalid401 Unauthorized10. TOKEN INVALIDATION STRATEGY10.1 When Tokens Are InvalidatedTokens become invalid when:User account is blockedPassword is changedAdmin forces logouttoken_version is incremented10.2 Token Version Mechanismtoken_version is stored in databaseToken contains the same versionOn every request:DB version ‚â† Token version ‚Üí rejectThis enables global logout without storing tokens11. LOGOUT BEHAVIOR11.1 Logout EndpointPOST /api/v1/auth/logout11.2 Logout RulesLogout is logical, not physicalClient deletes stored tokenAPI may increment token_version if forced logoutNo server-side session destruction12. AUTHORIZATION MODEL (RBAC)12.1 Authorization TypeRole-Based Access Control (RBAC)Enforced only at API level12.2 Defined RolesRoleAccess ScopeAdminFull system accessInstructorAssigned courses & batchesStudentSelf-owned resources only13. AUTHORIZATION ENFORCEMENT LAYERSEvery protected request must pass all layers in order:Authentication MiddlewareAccount Status MiddlewareRole MiddlewareOwnership Middleware (where applicable)‚ùå Skipping any layer is strictly forbidden.14. ACCOUNT STATUS ENFORCEMENT14.1 Status ValuesStatusBehavioractiveFull accesspendingLimited accessblockedAccess denied14.2 Blocked User RuleBlocked users cannot access any protected endpointExisting tokens become invalid immediately15. MULTI-DEVICE LOGIN POLICYMultiple device login is allowedEach device has independent tokentoken_version invalidation logs out all devicesThis supports:Web + mobile usageEmergency forced logout16. PASSWORD MANAGEMENT RULES16.1 Storage RulesPasswords are hashedPlain-text passwords are never storedPasswords are never logged16.2 Password Change RulesRequires current passwordInvalidates all existing tokensForces re-login on all devices17. PASSWORD RESET FLOW17.1 Reset StrategyToken-based resetTime-limited tokenSingle-use token17.2 Reset RulesReset token expires automaticallyPassword reset invalidates all access tokens18. STANDARD ERROR RESPONSES18.1 Unauthorized (401){  "success": false,  "message": "Unauthorized access",  "code": 401}18.2 Forbidden (403){  "success": false,  "message": "Access denied",  "code": 403}No internal reasons are exposed to clients.19. SECURITY RULES (MANDATORY)HTTPS is mandatoryTokens must never be:Stored in cookiesLoggedSent via URLAuthorization header is required for protected endpointsFrontend role checks are non-trusted20. AUDIT & MONITORINGThe system logs:Login attemptsFailed loginsToken invalidationsAccount blocksForced logoutsLogs are:TimestampedUser-attributedImmutable21. FINAL AUTHORITY RULEThis module is the single source of truth for:AuthenticationAuthorizationToken lifecycleNo other module may:Override access rulesTrust frontend permissionsBypass middleware enforcement‚úÖ END OF MODULE 1
----------------------------------------
MODULE 2 Content:
MODULE 2SECURITY & THREAT MODEL(FastAPI ‚Äì API Core Security Module)1. SYSTEM SCOPE & SECURITY LEVELSystem Scope:api.domain.com (FastAPI backend)Applies To:Admin PanelInstructor PanelStudent PanelPublic WebsiteWebSocket ConnectionsFile UploadsPayments & TransactionsSecurity Level:Enterprise-grade baseline, scalable to higher compliance standards.2. PURPOSE OF THIS MODULEThe purpose of this module is to:Identify realistic threat vectorsDefine mandatory defensive controlsReduce blast radius in case of compromiseProtect:User dataPaymentsAcademic integrityPlatform reputation‚ö†Ô∏è This module is non-optional.Any shortcut here becomes a production incident later.3. CORE SECURITY ASSUMPTIONS3.1 Frontend Is UntrustedAll frontend applications:Can be modifiedCan be reverse-engineeredCan send forged requestsTherefore:Frontend never enforces securityAPI validates everything3.2 Assume Breach MentalityThe system is designed assuming:Tokens may be stolenEndpoints may be probedUsers may behave maliciouslyInsiders may misuse privilegesSecurity is about damage control, not blind trust.4. THREAT CLASSIFICATION4.1 External ThreatsThreatDescriptionBrute-force loginRepeated credential attemptsCredential stuffingUsing leaked credentialsToken theftStolen JWT reuseAPI abuseExcessive or malformed requestsDDoSTraffic floodingInjection attacksSQL / NoSQL / commandFile upload abuseMalware, oversized files4.2 Internal ThreatsThreatDescriptionPrivilege escalationRole misuseHorizontal accessAccessing others‚Äô dataInstructor abuseAttendance manipulationAdmin misuseUnauthorized bans / editsChat misuseSpam, harassment4.3 Data & Academic ThreatsThreatDescriptionAttendance tamperingFake presenceCertificate forgeryInvalid completionsPayment manipulationRefund abuseCourse material leakageUnauthorized sharing5. API SURFACE PROTECTION5.1 HTTPS EnforcementAll API traffic must use HTTPSHTTP requests are rejected immediatelyTLS termination handled at:Load balancer orReverse proxyNo internal exception to this rule.5.2 Request Size LimitsGlobal max request size enforcedSmaller limits for:Auth endpointsChat messagesFile uploads have strict capsPrevents:Memory exhaustionPayload flooding6. RATE LIMITING STRATEGY6.1 Rate Limiting DimensionsRate limits are enforced per:IP addressAccess tokenEndpoint sensitivity6.2 Rate Limit CategoriesEndpoint TypePolicyAuth endpointsVery strictPublic read APIsModerateAuthenticated writesToken-basedAdmin actionsStrict + audit6.3 Violation HandlingTemporary throttlingProgressive penaltiesLogged for audit review7. AUTHENTICATION ATTACK PROTECTION7.1 Brute Force ProtectionLogin attempts are rate-limitedCooldown after repeated failuresSame error message for all failuresPrevents:Username enumerationPassword guessing7.2 Credential Stuffing DefenseIP-based throttlingToken invalidation on password changeAccount-level monitoring hooks (future-ready)8. TOKEN SECURITY CONTROLS8.1 Token Handling RulesTokens must:Never be stored in cookiesNever be loggedNever be sent in URLsTransported only via:Authorization: Bearer <token>8.2 Token Replay ProtectionShort-lived tokenstoken_version enforcementImmediate invalidation on blockEven if token is stolen:Damage window is limited9. AUTHORIZATION ATTACK PREVENTION9.1 Horizontal Privilege EscalationPrevented using:Ownership middlewareResource-to-user mappingServer-side relationship checksExamples:Student cannot access another student‚Äôs courseInstructor cannot modify unassigned batch9.2 Vertical Privilege EscalationPrevented using:Strict role middlewareNo shared endpoints across rolesAdmin-only endpoint segregationRole is always derived from token, never from request payload.10. INPUT VALIDATION & INJECTION PROTECTION10.1 Validation StrategyAll inputs validated using Pydantic v2Strong typing enforcedReject unknown fields10.2 Injection ProtectionORM-based queries onlyNo raw SQL unless boundSanitized rich-text inputsEscaped user-generated content11. FILE UPLOAD SECURITY11.1 Allowed File RulesWhitelisted extensionsMIME type verificationSize limits per roleFile count limits11.2 Storage RulesFiles stored outside public rootAccess via:Signed URLsControlled API endpointsNo direct disk access11.3 Malware Defense (Future-Ready)Virus scanning hookQuarantine failed filesAdmin notification12. CHAT & REAL-TIME SECURITY12.1 WebSocket SecurityToken-authenticated handshakeRole verified at connection timeOwnership verified per message12.2 Chat Abuse ControlsMessage rate limitsMedia type restrictionsAdmin & instructor moderationStudent block/unblock support13. PAYMENT & FINANCIAL SECURITY13.1 Payment Data RulesNo gateway secrets in frontendServer-to-server verificationImmutable approved transactions13.2 Refund SecurityRefunds logged as separate transactionsEnrollment reversal does not delete historyManual refunds are auditable14. SENSITIVE DATA PROTECTION14.1 Sensitive FieldsPasswordsTokensAPI keysPayment identifiersKYC documents14.2 Protection MeasuresEncryption at restMasked responsesNo sensitive data in logs15. LOGGING & AUDIT STRATEGY15.1 What Is LoggedAuthentication eventsAuthorization failuresAdmin actionsInstructor disciplinary requestsPayment actions15.2 What Is Never LoggedPasswordsTokensSecretsRaw payment details16. ERROR HANDLING SECURITY16.1 Error Response RulesNo stack traces in responsesNo internal messagesGeneric error responses onlyExample:"Something went wrong. Please try again."17. DENIAL OF SERVICE (DoS) MITIGATIONRate limitingTimeout enforcementRequest size limitsGraceful degradationCritical APIs are prioritized under load.18. ADMIN & INSTRUCTOR ABUSE PREVENTIONEven privileged users are subject to:Audit loggingPermission boundariesReason-based actionsHigh-risk actions:Student bansCourse access revocationRefund approvals19. BACKUP & RECOVERY SECURITYAutomated DB backupsEncrypted storageRestricted accessRegular restore testingBackups are never exposed to application layer.20. FUTURE SECURITY EXTENSIONS (PLANNED)Architecture supports:Two-factor authentication (2FA)IP allowlisting for adminWeb Application Firewall (WAF)Security headers hardeningSOC monitoring integration21. FINAL SECURITY GOVERNANCE RULESecurity decisions are:CentralizedDocumentedEnforced only by the APIFrontend applications:Cannot weaken securityCannot bypass rulesCannot redefine access‚úÖ END OF MODULE 2üß† Mentor InsightIf Module 1 defines who can enter,Module 2 defines how the building survives attacks.Most systems fail not because of bad features,but because security was ‚Äúassumed‚Äù instead of designed.
----------------------------------------
MODULE 3 Content:
MODULE 3ADMIN PANEL ‚Äì SYSTEM CONTROL INTERFACE(Next.js App Router + FastAPI API Consumer)1. SYSTEM SCOPE & ACCESSSubdomain:admin.domain.comFrontend Technology:Next.js (App Router)TypeScriptTailwind CSSBackend Dependency:FastAPI (api.domain.com)User Role:Admin onlyAccess Type:AuthenticatedRole-restrictedAPI-authoritative2. PURPOSE OF THE ADMIN PANELThe Admin Panel is the central control system of the platform.Its purpose is to allow authorized administrators to:Control users, courses, batches, and contentModerate instructors and studentsApprove or reject sensitive actionsManage public-facing contentOversee payments and refundsMaintain academic and operational integrity‚ö†Ô∏è The Admin Panel is not a business logic layer.It is a privileged UI, not a privileged authority.3. RESPONSIBILITY BOUNDARIES (VERY IMPORTANT)3.1 What the Admin Panel CAN DoRender UICollect admin inputCall API endpointsDisplay system stateShow confirmations and warnings3.2 What the Admin Panel MUST NEVER DoDirect database accessEnforce business rulesDecide permissionsAssume trust based on UI roleBypass API validationsEven Admin UI cannot trust itself.4. AUTHENTICATION & ACCESS RULES4.1 Access ConditionsAn admin can access the panel only if:JWT token is presentToken is validRole = adminAccount status = activeAll checks are enforced by API.4.2 Failure HandlingConditionBehaviorToken missingRedirect to loginToken expiredForce re-loginRole mismatchUnauthorized screenAccount blockedAccess denied5. ADMIN PANEL ARCHITECTURE5.1 Architectural PatternNext.js App RouterServer Components for data-heavy pagesClient Components only where interaction is requiredStateless requests5.2 Communication FlowAdmin UI   ‚ÜìFastAPI (RBAC + ownership)   ‚ÜìPostgreSQL (master DB)The Admin Panel never caches authoritative data permanently.6. CORE ADMIN MODULES OVERVIEWThe Admin Panel is divided into the following logical modules:Admin DashboardStudent ManagementInstructor ManagementCourse ManagementBatch ManagementStudy Material ApprovalChat ModerationCourse-Level Discipline SystemTransactions & RefundsPublic Course Content ManagementWebsite & SEO SettingsAudit Logs & MonitoringAdmin Profile & SecurityEach module is isolated, auditable, and API-driven.7. ADMIN DASHBOARD MODULEPurposeProvide system-wide visibility without control actions.FeaturesTotal studentsTotal instructorsActive coursesRunning batchesRevenue summaryPending approvalsDisciplinary requestsCharacteristicsRead-onlyAggregated API dataCached temporarily8. STUDENT MANAGEMENT MODULECapabilitiesView student listView student profileBlock / unblock student accountView enrollmentsView attendanceView certificatesView transaction historyRestrictionsCannot view passwordsCannot impersonate studentCannot modify historical paymentsAll actions are logged and auditable.9. INSTRUCTOR MANAGEMENT MODULECapabilitiesCreate instructor accountsApprove or reject onboardingManage KYC statusAssign instructors to batchesBlock / unblock instructorsView instructor performanceRestrictionsEarnings cannot be edited arbitrarilyPayment changes require audit loggingInstructor cannot be deleted once active10. COURSE MANAGEMENT MODULECapabilitiesCreate coursesEdit course metadataSet course status:DraftPublishedArchivedManage pricingControl visibilityRulesDraft courses are never publicPublished courses appear on public websiteArchived courses are read-only11. BATCH MANAGEMENT MODULECapabilitiesCreate batchesAssign course to batchAssign students to batchAssign instructors to batchManage schedulesView batch chat (read-only)ConstraintsOne course per batchDuplicate assignments preventedAdmin cannot send messages as instructor12. STUDY MATERIAL APPROVAL MODULE (NEW)PurposeEnsure academic quality and content control.WorkflowInstructor uploads materialMaterial enters pending stateAdmin reviews:ContentFile typeCourse relevanceAdmin actions:Approve ‚Üí visible to studentsReject ‚Üí instructor notifiedRulesOnly running courses allowedCompleted courses ‚Üí upload disabledRejected materials are immutable13. CHAT MODERATION MODULE (NEW)Admin CapabilitiesView group chats (read-only)Send messages as:‚ÄúUnboundByte Support‚ÄùBlock / unblock students from chatRemove spam users temporarilyRestrictionsCannot delete historical messagesCannot edit messagesAll moderation actions are logged.14. COURSE-LEVEL DISCIPLINE SYSTEM (NEW)PurposePunish misbehavior without deleting accounts.Instructor ‚Üí Admin WorkflowInstructor submits request:Student IDCourse IDReasonEvidence (text/image/video/audio)Request enters pending stateAdmin reviews requestAdmin ActionsApprove ‚Üí Student banned from that courseReject ‚Üí No actionEffects of Course BanCourse removed from student dashboardAttendance lockedCertificate disabledLogin remains active15. TRANSACTIONS & REFUND MODULE (UPDATED)CapabilitiesView all transactionsFilter by date, user, typeCreate refund transactionsReverse course enrollmentRefund RulesRefunds are separate transactionsOriginal payment remains immutableEnrollment marked as discontinuedStudent login remains activeFuture payout system can hook here.16. PUBLIC COURSE CONTENT MANAGEMENT (NEW)PurposeManage public-facing detailed course pages.CapabilitiesAdd long-form descriptionsRich text contentMedia embeddingSEO metadataVisibility controlSeparation RulePublic course content ‚â† internal syllabus17. WEBSITE & SEO SETTINGS MODULECapabilitiesBranding controlMeta titles & descriptionsSitemap dataPublic page visibilityChanges reflect immediately.18. AUDIT LOGS & MONITORING MODULELogged ActionsUser blocksCourse bansRefund approvalsContent publishingInstructor moderationLog PropertiesImmutableTimestampedActor-linkedReason-required for sensitive actions19. ADMIN PROFILE & SECURITYCapabilitiesUpdate profileChange passwordView login historyManage personal securityRestrictionsAdmin role cannot be downgraded via UIEmail changes may require verification20. ERROR HANDLING STRATEGYFriendly UI messagesNo technical detailsGraceful fallback on API failureRetry guidance where applicable21. SECURITY CONSTRAINTSHTTPS enforcedToken-based access onlyStrong password enforcementRate limiting on sensitive actionsCSRF handled at framework level22. FINAL AUTHORITY RULEThe Admin Panel is a powerful interface, not a powerful authority.All critical decisions are:Validated by APILoggedAuditable‚úÖ END OF MODULE 3üß† Mentor InsightAdmin panels are where systems die if poorly designed.This design is correct because:Power is distributedActions are reviewableDamage is reversibleHistory is preserved
----------------------------------------
MODULE 4 Content:
MODULE 4INSTRUCTOR PANEL ‚Äì TEACHING & DELIVERY INTERFACE(Next.js App Router + FastAPI API Consumer)1. SYSTEM SCOPE & ACCESSSubdomain:instructor.domain.comFrontend Technology:Next.js (App Router)TypeScriptTailwind CSSBackend Dependency:FastAPI (api.domain.com)User Role:InstructorAccess Type:AuthenticatedRole-restrictedOwnership-based2. PURPOSE OF THE INSTRUCTOR PANELThe Instructor Panel exists to enable teaching, not administration.Its goals are to:Allow instructors to manage assigned courses and batchesConduct live classesMark attendanceShare study materialsCommunicate with studentsReport misconduct‚ö†Ô∏è Instructors do not control system data.They operate strictly within assigned boundaries.3. RESPONSIBILITY BOUNDARIES3.1 What the Instructor Panel CAN DoDisplay assigned batchesCollect teaching inputsTrigger teaching-related API actionsShow performance & analyticsCommunicate within assigned batches3.2 What the Instructor Panel MUST NEVER DoAccess unassigned courses or batchesModify system-level configurationsManage paymentsEdit student accountsEnforce punishments directlyAll authority is delegated and verified by API.4. AUTHENTICATION & ACCESS RULES4.1 Access ConditionsInstructor access is granted only if:JWT token is validRole = instructorAccount status = approvedOwnership validation passes4.2 Access Failure BehaviorConditionBehaviorStatus = pendingDashboard onlyStatus = blockedLogin deniedRole mismatchUnauthorized screenToken expiredRe-login required5. INSTRUCTOR ACCOUNT STATESStatus LifecycleStatusAccess LevelpendingRead-only dashboardapprovedFull instructor accessblockedNo accessStatus transitions are Admin-controlled only.6. INSTRUCTOR PANEL ARCHITECTUREDesign PatternNext.js App RouterServer Components for data viewsClient Components for interactionsStateless communicationCommunication FlowInstructor UI   ‚ÜìFastAPI (RBAC + Ownership)   ‚ÜìPostgreSQLThe Instructor Panel never stores authoritative data.7. INSTRUCTOR DASHBOARD MODULEPurposeProvide instructors with operational clarity.Dashboard FeaturesAssigned running batchesCompleted batchesToday‚Äôs classesAttendance summaryPending material approvalsStudent queries countEarnings summary (read-only)Account & KYC statusData NatureRead-onlyAggregatedCached temporarily8. BATCH MANAGEMENT MODULECapabilitiesView assigned batchesView batch detailsView enrolled studentsView batch scheduleJoin live class linksOwnership RulesInstructor can access only assigned batchesOwnership enforced at API level9. ATTENDANCE MANAGEMENT MODULECapabilitiesMark attendanceUpdate attendance (same-day only)View attendance historyConstraintsCannot mark attendance for unassigned batchCannot modify historical attendance beyond allowed windowAll actions loggedAttendance is considered a high-risk operation.10. STUDY MATERIAL UPLOAD MODULE (NEW)PurposeEnable instructors to share learning resources under supervision.Upload RulesOnly for assigned & running coursesCompleted courses ‚Üí upload disabledAllowed formats:PDFPPTImageVideoSize limits enforcedMIME validation enforcedApproval WorkflowInstructor uploads materialMaterial enters pending approvalAdmin reviewsAdmin:Approves ‚Üí visible to studentsRejects ‚Üí instructor notifiedRestrictionsInstructor cannot edit after submissionInstructor cannot approve their own material11. BATCH CHAT SYSTEMInstructor CapabilitiesSend text messagesSend imagesSend videosReply to studentsTag studentsView full chat historyChat ModerationBlock / unblock students from chatReport abusive behavior to AdminRestrictionsCannot delete messagesCannot edit messagesCannot leave group chat12. STUDENT MISCONDUCT REPORTING (NEW)PurposeProvide structured disciplinary escalation.Instructor ActionsSubmit misconduct requestAttach:Text explanationImagesVideosAudio evidenceSpecify course & studentLimitationsInstructor cannot block course access directlyInstructor cannot ban accountsAll requests require Admin approval.13. INSTRUCTOR TRANSACTIONS MODULECapabilitiesView earnings summaryView transaction historyDownload payment slipsDownload reportsRestrictionsCannot edit transactionsCannot trigger payoutsCannot request manual edits14. INSTRUCTOR PROFILE MANAGEMENTCapabilitiesChange passwordUpdate phone numberUpdate profile imageView KYC statusRestrictionsCannot change emailCannot change legal nameCannot re-submit KYC after approval15. NOTICES & ANNOUNCEMENTSCapabilitiesView admin-sent noticesNotification indicatorsRead-only accessControlNotices are managed exclusively by Admin.16. ERROR HANDLING STRATEGYFriendly UI messagesClear action guidanceGraceful degradationNo technical error exposure17. AUDIT & MONITORINGLogged Instructor ActionsAttendance markingSchedule updatesMaterial uploadsStudent block actionsMisconduct reportsLogs are immutable and time-stamped.18. PERFORMANCE CONSIDERATIONSPagination for student listsCached dashboardsOptimized API callsNo long-running UI operations19. SECURITY CONSTRAINTSHTTPS enforcedToken-based access onlyOwnership middleware mandatoryRate limiting on write actions20. FINAL AUTHORITY RULEInstructors operate within strict ownership boundaries.They facilitate learning ‚ÄîThey do not control the system.All permissions are enforced by the API.‚úÖ END OF MODULE 4üß† Mentor InsightInstructor panels fail when:Too much power is givenNo audit existsPunishment is instant and emotionalThis design avoids all three.
----------------------------------------
MODULE 5 Content:
MODULE 5STUDENT PANEL ‚Äì LEARNING & SELF-SERVICE INTERFACE(Next.js App Router + FastAPI API Consumer)1. SYSTEM SCOPE & ACCESSSubdomain:student.domain.comFrontend Technology:Next.js (App Router)TypeScriptTailwind CSSBackend Dependency:FastAPI (api.domain.com)User Role:StudentAccess Type:AuthenticatedSelf-owned data onlyStrict ownership enforcement2. PURPOSE OF THE STUDENT PANELThe Student Panel is the primary learning interface of the platform.Its purpose is to allow students to:Access enrolled coursesAttend classesView study materialsTrack progress and attendanceCommunicate in course chatsView transactions and certificatesRaise complaints or requests‚ö†Ô∏è Students are never allowed to control system behavior or other users.3. RESPONSIBILITY BOUNDARIES3.1 What the Student Panel CAN DoDisplay enrolled course dataTrigger allowed student actionsCollect inputs (chat, complaints, forms)Show progress and resultsDownload allowed documents3.2 What the Student Panel MUST NEVER DoAccess other students‚Äô dataModify attendanceUpload course materialsControl chat moderationEdit transactions or certificatesAll enforcement happens at API level.4. AUTHENTICATION & ACCESS RULES4.1 Access ConditionsA student may access the panel only if:JWT token is validRole = studentAccount status = activeOwnership validation passes4.2 Access Failure BehaviorConditionBehaviorToken missingRedirect to loginToken expiredForce re-loginAccount blockedAccess deniedOwnership violation403 Forbidden5. STUDENT ACCOUNT STATESStatus RulesStatusAccessactiveFull student accessblockedLogin deniedStudents never have a pending state.6. STUDENT PANEL ARCHITECTUREDesign PatternNext.js App RouterServer Components for course dataClient Components for interactionStateless requestsCommunication FlowStudent UI   ‚ÜìFastAPI (RBAC + Ownership)   ‚ÜìPostgreSQLThe Student Panel never stores authoritative data.7. STUDENT DASHBOARD MODULEPurposeProvide a personalized overview of learning activity.Dashboard FeaturesActive courses countCompleted courses countAttendance summaryCertificates achievedRecent transactionsNotices & announcementsQuick navigation shortcutsData CharacteristicsRead-onlySelf-scopedCached temporarily8. COURSE MANAGEMENT MODULECapabilitiesView enrolled coursesView course detailsView batch informationView schedulesAccess live class linksRestrictionsCannot access unenrolled coursesCannot modify course contentCannot join archived courses9. COURSE PROGRESS & ATTENDANCECapabilitiesView attendance historyView attendance percentageView progress indicatorsVisual graphs (read-only)RestrictionsCannot mark or edit attendanceProgress calculation controlled by API only10. STUDY MATERIAL ACCESS MODULECapabilitiesView approved study materialsDownload allowed filesAccess batch-wise materialsRestrictionsCannot upload materialsCannot delete materialsCannot access rejected or pending materialsAccess limited to assigned batches only11. COURSE CHAT SYSTEM (UPDATED RULES)Student Chat PermissionsStudents can:Send text messagesSend imagesStudents cannot:Send videosSend audioDelete messagesEdit messagesBlock other usersChat BehaviorRead full chat historyParticipate in discussionsRead instructor/admin announcementsBlocked Student BehaviorIf blocked from chat:Cannot send messagesCan still read messages12. COURSE-LEVEL BAN BEHAVIOR (NEW)ScenarioAdmin bans a student from a specific running course.EffectsCourse removed from dashboardAttendance access lockedStudy materials inaccessibleCertificate issuance disabledImportant RuleStudent login remains activeOther enrolled courses unaffected13. TRANSACTION MANAGEMENT MODULECapabilitiesView transaction historyView payment detailsDownload transaction receiptsRestrictionsCannot edit transactionsCannot delete transactionsRefunds are view-only14. CERTIFICATE MANAGEMENT MODULECapabilitiesView issued certificatesDownload certificates (PDF)Verify completion statusRestrictionsCannot request certificate editsCannot download certificate if course is banned or incomplete15. COMPLAINT & GRIEVANCE SYSTEMCapabilitiesSubmit complaintsAttach optional evidenceTrack complaint statusView admin responsesRulesComplaints are immutable after submissionResolution handled by Admin only16. STUDENT PROFILE MANAGEMENTCapabilitiesUpdate limited personal detailsChange passwordUpdate profile imageRestrictionsCannot change emailCannot change system identifiersCannot modify enrollment details17. NOTICES & NOTIFICATIONSCapabilitiesView admin announcementsNotification indicatorsRead-only accessControlAll notices are created by Admin only.18. ERROR HANDLING STRATEGYFriendly error messagesClear retry guidanceGraceful fallback on API failureNo technical details exposed19. AUDIT & MONITORINGLogged Student ActionsCourse accessAttendance viewsChat participation (metadata)Complaint submissionsPayment interactions (metadata)Logs are immutable and time-stamped.20. PERFORMANCE CONSIDERATIONSPagination for course listsCached dashboard summariesOptimized API callsMinimal client-side computation21. SECURITY CONSTRAINTSHTTPS enforcedToken-based access onlyOwnership middleware mandatoryRate limiting on write actions22. FINAL AUTHORITY RULEStudents have access only to their own learning data.They cannot influence:System rulesOther usersAcademic recordsAll permissions are enforced strictly by the API.‚úÖ END OF MODULE 5üß† Mentor InsightA good student panel:Feels simpleFeels fairFeels safeA bad student panel:Leaks dataEncourages abuseBreaks trustThis design clearly follows the first path.
----------------------------------------
MODULE 6 Content:
MODULE 6PUBLIC WEBSITE ‚Äì MARKETING, DISCOVERY & NAVIGATION LAYER(Next.js App Router + FastAPI Public APIs)1. SYSTEM SCOPE & ACCESSSubdomain:www.domain.comFrontend Technology:Next.js (App Router)TypeScriptTailwind CSSBackend Dependency:FastAPI (Public APIs only)Access Type:Public (No authentication required)2. PURPOSE OF THE PUBLIC WEBSITEThe Public Website is the entry point to the platform.Its goals are to:Present the organization and offeringsShowcase publicly available coursesEnable fast discovery via searchSupport SEO and marketingRedirect users to authentication flows‚ö†Ô∏è The public website is read-only by designIt never performs authenticated or sensitive operations.3. RESPONSIBILITY BOUNDARIES3.1 What the Public Website CAN DoRender public contentDisplay course listings and detailsAccept public form submissionsPerform search and navigationRedirect users to login / register3.2 What the Public Website MUST NEVER DoAccess private dataEnforce permissionsHandle authentication logicStore sensitive informationAssume user identityAll authority resides in the API.4. ACCESS RULES & SECURITY POSTUREAccess CharacteristicsNo login requiredNo token requiredAnonymous access onlySecurity RuleAny attempt to access protected endpoints from the public website:Is rejected by APIIs logged as suspicious if repeated5. PUBLIC WEBSITE ARCHITECTUREDesign PatternNext.js App RouterServer Components for SEO pagesStatic Generation (SSG) where possibleIncremental Static Regeneration (ISR) for content freshnessCommunication FlowPublic Website   ‚ÜìFastAPI (Public Endpoints Only)No direct database access.6. CORE PAGE MODULESThe Public Website consists of the following page modules:Landing PageAbout PageServices PageTraining / Courses Listing PageCourse Detail PagePortfolio / Achievements PageCareer PageJob Detail PageContact PageAuthentication Redirect Pages7. LANDING PAGE MODULEPurposeIntroduce the platform and convert visitors.Content SectionsHero section with CTAOrganization introductionHighlighted coursesTestimonialsTrust indicatorsCall-to-action bannersFooter (contact & social links)Data SourceAPI public endpointsCached aggressively8. ABOUT PAGE MODULEPurposeEstablish credibility and transparency.ContentOrganization overviewMission & visionTeam introductionJourney & milestonesManagementFully admin-managed via APINo deployment required for updates9. SERVICES PAGE MODULEPurposeExplain services offered beyond courses.CapabilitiesList servicesDetailed service descriptionsInquiry CTARestrictionsNo pricing logicNo enrollment actions10. TRAINING / COURSES LISTING PAGEPurposeShowcase publicly available courses.CapabilitiesList published coursesFilter by categorySort by relevanceDisplay pricing & durationCTA to enroll (redirect only)RulesOnly published courses visibleDraft / internal courses hiddenNo access to syllabus or materials11. COURSE DETAIL PAGE (PUBLIC)PurposeProvide deep, descriptive course information.ContentLong-form descriptionMedia (images/videos)Learning outcomesDuration & schedule overviewPricing informationEnrollment CTAImportant Separation RulePublic course content ‚â† internal course syllabus12. GLOBAL SEARCH MODULE (NEW)PurposeEnable fast navigation and discovery.Search ScopePublic coursesPublic pagesQuick linksBehaviorSearch bar in main navigationKeyword-based resultsAPI-powered search endpointAPI RulesPublic endpointRate-limitedIndexed fields only13. PORTFOLIO / ACHIEVEMENTS PAGEPurposeShowcase completed projects and success stories.ContentProjects listMedia galleriesOptional category filtersNatureRead-onlyAdmin-managed14. CAREER PAGE MODULEPurposeAttract job applicants.CapabilitiesJob listingsJob descriptionsApply CTAData HandlingApplications submitted via APIResume uploads securely handledNo public visibility of applicants15. JOB DETAIL PAGECapabilitiesJob descriptionRequirementsApplication formRulesForm validation via APISpam protection applied16. CONTACT PAGE MODULEPurposeProvide communication channels.FeaturesContact formAddress & contact detailsMap integrationSecurityInput validationRate limitingSpam protection17. AUTHENTICATION REDIRECT PAGESPagesLoginRegisterReset PasswordBehaviorPublic accessOn successful login, redirect:Admin ‚Üí Admin PanelInstructor ‚Üí Instructor PanelStudent ‚Üí Student Panel18. SEO & METADATA MANAGEMENTSEO StrategyServer-rendered pagesStructured URLsMeta tags per pageOpen Graph tagsSitemap generationControlSEO content managed via Admin PanelAPI provides metadata dynamically19. PERFORMANCE STRATEGYOptimization TechniquesStatic generationAPI response cachingCDN-friendly assetsLazy-loaded mediaOptimized images20. ERROR HANDLING STRATEGYBehaviorFriendly error pagesSEO-safe 404 handlingGraceful fallback on API downtimeNo technical details exposed21. ANALYTICS & TRACKING (OPTIONAL)Supported TrackingPage viewsCTA interactionsConversion trackingRuleTracking scripts are isolated and non-intrusive.22. SECURITY CONSTRAINTSHTTPS enforcedRate limiting on public formsInput sanitizationNo sensitive data exposureRead-only API access23. FINAL AUTHORITY RULEThe Public Website is a presentation layer only.It has:No authority over system dataNo permission logicNo access to private resourcesAll control flows through the API.‚úÖ END OF MODULE 6üß† Mentor InsightA strong public website:Builds trustAttracts the right usersNever leaks internal structureThis design does exactly that.
----------------------------------------
MODULE 7 Content:
MODULE 7CHAT & REAL-TIME COMMUNICATION SYSTEM(FastAPI WebSocket + Next.js Clients)1. SYSTEM SCOPE & APPLICABILITYApplies To:Admin PanelInstructor PanelStudent PanelTechnology Stack:Backend: FastAPI (WebSocket + REST)Frontend: Next.js (App Router)Protocol: Secure WebSocket (wss://)Authentication: JWT-based handshakePersistence: PostgreSQL (chat_schema)Optional Scaling (future): Redis Pub/Sub2. PURPOSE OF THE CHAT SYSTEMThe Chat System enables controlled, auditable, real-time communication within a course batch.It supports:Instructor-led discussionsStudent participation (limited)Admin announcements and moderationEvidence preservation for disputes‚ö†Ô∏è This is not a social chat system.It is a regulated academic communication channel.3. CORE DESIGN PHILOSOPHY3.1 Course-Bound CommunicationEvery message belongs to:One courseOne batchNo cross-course or global chatsNo anonymous participation3.2 Abuse-First ArchitectureThe system assumes:Spam attemptsEmotional abuseMedia misuseAuthority misuseControls exist by default, not as exceptions.4. CHAT CONTEXT & STRUCTURE4.1 Chat Unit Definition1 Chat Group = 1 Course + 1 Batch4.2 Chat ParticipantsRoleAccessAdminAll chatsInstructorAssigned batches onlyStudentEnrolled batches onlyOwnership is verified per connection and per message.5. AUTHENTICATION & WEBSOCKET HANDSHAKE5.1 Connection FlowClient initiates WebSocket connectionJWT token is provided during handshakeAPI validates:Token signatureExpiryRoleAccount statusBatch ownershipConnection accepted or rejected5.2 Connection Rejection RulesReasonResultInvalid / expired tokenConnection deniedBlocked accountConnection deniedOwnership violationConnection deniedCourse-level banConnection denied6. ROLE-BASED CHAT PERMISSIONS6.1 Messaging Capability MatrixRoleTextImageVideoAudioAdmin‚úÖ‚úÖ‚úÖ‚úÖInstructor‚úÖ‚úÖ‚úÖ‚ùåStudent‚úÖ‚úÖ‚ùå‚ùå6.2 Moderation Capability MatrixRoleBlock UserEdit MessageDelete MessageAdmin‚úÖ‚úÖ‚úÖInstructor‚úÖ (chat-only)‚ùå‚ùåStudent‚ùå‚ùå‚ùå7. MESSAGE TYPES & STRUCTURE7.1 Message CategoriesText messageImage messageVideo messageSystem messageModeration message7.2 Logical Message StructureEach message contains:message_idsender_idsender_rolecourse_idbatch_idmessage_typecontent / media_referenceis_edited (boolean)is_deleted (boolean)created_atupdated_at (if edited)moderation_metadata8. MEDIA HANDLING RULES8.1 Media Upload FlowClient uploads media via REST APIAPI validates:File extensionMIME typeFile sizeMedia stored securelyMedia reference sent through WebSocket8.2 Storage RulesStored outside public rootServed via signed URLsNo direct path exposure9. CHAT RATE LIMITING9.1 Message Rate LimitsRoleMessages / minuteAdminHighInstructorMediumStudentLow9.2 Violation HandlingTemporary muteWebSocket warning eventEscalation to AdminLogged for audit10. STUDENT CHAT BLOCKING (CHAT-LEVEL)10.1 Who Can Block / UnblockAdminInstructor (chat-level only)10.2 Block EffectsWhen a student is blocked:Cannot send messagesCan read all messagesBlock applies only to that batch10.3 Block LoggingEvery block/unblock action is logged with:ActorTarget studentBatchReasonTimestamp11. ADMIN CHAT MESSAGE EDIT AUTHORITY11.1 Admin Edit RightsAdmins can:Edit any chat messageAcross any course or batchAdmins cannot:Change sender identityModify message timestampReassign message ownership11.2 Edit BehaviorOriginal message preserved internallyEdited content shown to usersMessage marked as:(Edited by Admin)Transparency is mandatory.12. ADMIN CHAT MESSAGE DELETE AUTHORITY12.1 Delete Type: Soft Delete OnlyAdmins cannot hard-delete messages.Instead:Message content is removedPlaceholder shown:"This message was removed by Admin"12.2 Why Soft Delete Is MandatoryAudit complianceAbuse preventionLegal traceabilityInternal investigation support13. ADMIN MODERATION AUDIT LOGGING (MANDATORY)Every admin edit or delete action logs:FieldDescriptionaction_typeedit_message / delete_messageadmin_idActormessage_idTargetcourse_idContextbatch_idContextreasonMandatorytimestampAction time‚ùå No reason ‚Üí action rejected.14. VISIBILITY RULESRoleWhat They SeeStudentEdited / deleted messageInstructorEdited / deleted messageAdminFull history including original content15. ADMIN CHAT INTERVENTION POWERSAdmins can:Send messages as ‚ÄúUnboundByte Support‚ÄùBroadcast announcementsTemporarily mute usersEdit or delete messagesView full chat historyAdmins cannot:Impersonate instructorsModify ownership mappings16. FAILURE & RECOVERY HANDLINGWebSocket FailuresAuto-reconnect supportedToken revalidated on reconnectGraceful disconnect handlingREST FallbackChat history fetched via RESTMessages queued on reconnect17. DATA RETENTION POLICYNo hard deletesChat archived after course completionRetained for audit & complianceLegal deletion only via special admin workflow18. PERFORMANCE CONSIDERATIONSBatch-based room subscriptionsPaginated message historyLazy loading older messagesRedis-supported fan-out (future)19. SECURITY CONSTRAINTSSecure WebSocket (wss://) onlyJWT validation on connectOwnership checks per messageMedia validation mandatoryRate limiting enforced20. FUTURE EXTENSIONS (DESIGN-READY)Supports:Read receiptsMessage reactionsInstructor-only announcementsAI moderation hooksCompliance export tools21. FINAL AUTHORITY RULEThe Chat System:Enables communicationPreserves evidenceEnforces disciplinePrevents abuseAdmin moderation authority is final, transparent, and audited.‚úÖ END OF MODULE 7 (REBUILT)üß† Mentor Closing NoteThis version now:Removes ambiguityPrevents power abuseProtects instructorsProtects studentsProtects the platform legallyThis is enterprise-ready chat design.
----------------------------------------
MODULE 8 Content:
MODULE 8API CONTRACTS & RESPONSIBILITY MATRIX(FastAPI ‚Äì REST + WebSocket APIs)1. SYSTEM SCOPE & PURPOSESystem Scope:api.domain.comApplies To:Admin PanelInstructor PanelStudent PanelPublic WebsiteWebSocket ClientsPurpose of This ModuleThis module defines:What API endpoints existWho can call themWhat authority they haveOwnership & role rulesRisk levelsAudit requirements‚ö†Ô∏è Once this module is finalized,no endpoint may be implemented or modified without updating this document.2. GLOBAL API PRINCIPLES (MANDATORY)All APIs are versioned/api/v1/*API is the final authorityFrontend assumptions are ignoredEvery write operation is validated server-sideRBAC + Ownership enforced on every protected endpointAPI responses are predictable and structured3. API CLASSIFICATION STRATEGYEach endpoint is classified by:3.1 Access LevelPublicAuthenticatedRole-restricted3.2 Operation TypeReadWriteCritical Write3.3 Ownership ScopeSystem-wideSelf-ownedAssignedResource-bound3.4 Risk LevelLowMediumHighCritical4. STANDARD API RESPONSE FORMATSuccess Response{  "success": true,  "data": {},  "message": "Optional message"}Error Response{  "success": false,  "message": "Error description",  "code": 400}5. AUTHENTICATION & IDENTITY ENDPOINTSEndpointMethodAccessOwnershipRisk/auth/loginPOSTPublicN/AMedium/auth/logoutPOSTAuthSelfLow/auth/reset-passwordPOSTPublicSelfMedium/auth/verify-emailPOSTPublicSelfMedium6. ADMIN API ENDPOINTS6.1 Admin DashboardEndpointMethodRisk/admin/dashboard/statsGETLow/admin/dashboard/alertsGETMedium6.2 Student ManagementEndpointMethodOwnershipRisk/admin/studentsGETSystemMedium/admin/students/{id}GETSystemMedium/admin/students/{id}PUTSystemHigh/admin/students/{id}/blockPATCHSystemCritical/admin/students/{id}/unblockPATCHSystemCritical6.3 Instructor ManagementEndpointMethodOwnershipRisk/admin/instructorsGETSystemMedium/admin/instructors/{id}/approvePATCHSystemCritical/admin/instructors/{id}/blockPATCHSystemCritical6.4 Course & Batch ManagementEndpointMethodOwnershipRisk/admin/coursesPOSTSystemHigh/admin/courses/{id}PUTSystemHigh/admin/batchesPOSTSystemHigh/admin/batches/{id}/assignPOSTSystemCritical7. STUDY MATERIAL MODERATION APIsEndpointMethodAccessRisk/instructor/materialsPOSTInstructorMedium/admin/materials/pendingGETAdminMedium/admin/materials/{id}/approvePATCHAdminHigh/admin/materials/{id}/rejectPATCHAdminHigh8. CHAT & MODERATION APIs (UPDATED)8.1 WebSocket Endpoint/ws/chat/{course_id}/{batch_id}JWT requiredOwnership validatedRate-limited8.2 Chat REST APIs (Admin)EndpointMethodPurposeRisk/admin/chat/messages/{id}/editPATCHEdit messageHigh/admin/chat/messages/{id}/deleteDELETESoft deleteHigh/admin/chat/block-userPOSTBlock studentHigh/admin/chat/unblock-userPOSTUnblock studentHigh9. COURSE-LEVEL DISCIPLINE APIsEndpointMethodAccessRisk/instructor/discipline-requestPOSTInstructorMedium/admin/discipline-requestsGETAdminMedium/admin/discipline/{id}/approvePATCHAdminCritical/admin/discipline/{id}/rejectPATCHAdminHigh10. TRANSACTION & REFUND APIsEndpointMethodAccessRisk/admin/transactionsGETAdminHigh/admin/refundsPOSTAdminCritical/student/transactionsGETStudentMedium11. STUDENT APIsEndpointMethodOwnershipRisk/student/dashboardGETSelfLow/student/coursesGETSelfLow/student/certificatesGETSelfMedium/student/complaintsPOSTSelfMedium12. INSTRUCTOR APIsEndpointMethodOwnershipRisk/instructor/dashboardGETAssignedLow/instructor/batchesGETAssignedMedium/instructor/attendancePOSTAssignedCritical13. PUBLIC APIsEndpointMethodRisk/public/coursesGETLow/public/courses/{slug}GETLow/public/searchGETLow/public/contactPOSTLow14. HIGH-RISK ENDPOINT RULESEndpoints marked High / Critical must enforce:AuthenticationRole validationOwnership validationRate limitingAudit loggingTransaction safety15. OWNERSHIP ENFORCEMENT RULESScenarioRuleStudent ‚Üí CourseMust be enrolledInstructor ‚Üí BatchMust be assignedAdmin ‚Üí AnySystem-wideChat ‚Üí MessageBatch-boundOwnership is derived only from DB relationships.16. API CHANGE CONTROL POLICYNo endpoint added without documentation updateNo silent behavior changesBreaking changes require version bump17. FINAL AUTHORITY STATEMENTThis API Contract document is the ultimate reference for:Backend implementationFrontend integrationSecurity auditsTeam onboardingIf it‚Äôs not written here, it does not exist.‚úÖ END OF MODULE 8üß† Mentor InsightMost production failures happen because:‚ÄúWe thought the API would do that‚Ä¶‚ÄùThis module removes thought and replaces it with certainty.
----------------------------------------
MODULE 9 Content:
MODULE 9DATABASE SCHEMA DESIGN(PostgreSQL ‚Äì Single Database, Multiple Schemas)1. DATABASE DESIGN GOALSThis database is designed to:Be the single source of truthSupport strict RBAC & ownershipPreserve full audit historyPrevent silent data corruptionSupport future expansion without schema breakageCore PrinciplesSingle PostgreSQL databaseMultiple logical schemasNo polymorphic ambiguitySoft deletes over hard deletesEvery sensitive action is auditableNo ‚Äúmagic JSON blobs‚Äù for core relationsJSON allowed only where structure is dynamic2. DATABASE SCHEMA OVERVIEW (NOT OPTIONAL)Schema NameResponsibilityauth_schemaAuthentication & identityprofile_schemaExtended user profilescourse_schemaCourses, batches, enrollment, formscontent_schemaPublic website & marketing contentchat_schemaChat messages & moderationpayment_schemaPayments, refundsnotification_schemaNotices & system notificationsaudit_schemaImmutable audit logsfile_schemaUploaded files & mediasystem_schemaEnums & system configsIf any one of these schemas is missing, some module will break later.SECTION Aauth_schema ‚Äì AUTHENTICATION & IDENTITYA1. usersPurpose:Master identity table for all users.ColumnTypeNotesidUUID (PK)Primary identityemailVARCHAR UNIQUELoginpassword_hashTEXTHashedroleENUMadmin / instructor / studentstatusENUMactive / pending / blockedtoken_versionINTJWT invalidationlast_login_atTIMESTAMPcreated_atTIMESTAMPupdated_atTIMESTAMP‚ùó Users are never deletedA2. password_resetsColumnTypeidUUID (PK)user_idUUID (FK ‚Üí users.id)reset_tokenTEXT (hashed)expires_atTIMESTAMPusedBOOLEANcreated_atTIMESTAMPSECTION Bprofile_schema ‚Äì EXTENDED USER DATAB1. student_profilesColumnTypeidUUID (PK)user_idUUID (FK ‚Üí users.id)phoneVARCHARprofile_image_idUUID (FK ‚Üí file_schema.files.id)created_atTIMESTAMPB2. instructor_profilesColumnTypeidUUID (PK)user_idUUID (FK ‚Üí users.id)qualificationTEXTexperience_yearsINTkyc_statusENUM (pending, approved, rejected)created_atTIMESTAMPSECTION Ccourse_schema ‚Äì ACADEMIC COREC1. coursesColumnTypeidUUID (PK)titleVARCHARcodeVARCHAR UNIQUEstatusENUM (draft, published, archived)created_byUUID (FK ‚Üí users.id)created_atTIMESTAMPC2. batchesColumnTypeidUUID (PK)course_idUUID (FK ‚Üí courses.id)nameVARCHARstart_dateDATEend_dateDATEstatusENUM (running, completed, cancelled)created_atTIMESTAMPC3. batch_instructorsColumnTypeidUUID (PK)batch_idUUIDinstructor_idUUIDassigned_atTIMESTAMPC4. enrollmentsColumnTypeidUUID (PK)student_idUUIDbatch_idUUIDstatusENUM (active, discontinued, banned, completed)enrolled_atTIMESTAMPdiscontinued_atTIMESTAMPüî• Course-level bans happen here (status = banned)C5. attendanceColumnTypeidUUID (PK)enrollment_idUUIDclass_dateDATEpresentBOOLEANmarked_byUUIDmarked_atTIMESTAMPC6. study_materialsColumnTypeidUUID (PK)batch_idUUIDuploaded_byUUIDfile_idUUIDstatusENUM (pending, approved, rejected)uploaded_atTIMESTAMPapproved_atTIMESTAMPSECTION DCUSTOM FORM ENGINE (VERY IMPORTANT)D1. custom_formsColumnTypeidUUID (PK)course_idUUIDtitleVARCHARdescriptionTEXTis_activeBOOLEANcreated_byUUIDcreated_atTIMESTAMPD2. custom_form_fieldsColumnTypeidUUID (PK)form_idUUIDfield_keyVARCHARlabelVARCHARfield_typeENUM (text, email, number, select, file, checkbox)is_requiredBOOLEANoptionsJSONBvalidation_rulesJSONBsort_orderINTD3. custom_form_submissionsColumnTypeidUUID (PK)form_idUUIDstudent_idUUIDsubmission_dataJSONBstatusENUM (pending, approved, rejected)submitted_atTIMESTAMPSECTION Econtent_schema ‚Äì PUBLIC WEBSITE CONTENTE1. public_course_detailsColumnTypeidUUID (PK)course_idUUIDhero_titleVARCHARshort_descriptionTEXTlong_descriptionTEXTcurriculumJSONBhighlightsJSONBseo_titleVARCHARseo_descriptionTEXTis_publishedBOOLEANupdated_atTIMESTAMPE2. pagesColumnTypeidUUID (PK)slugVARCHAR UNIQUEcontentTEXTseo_metaJSONBpublishedBOOLEANSECTION Fchat_schema ‚Äì CHAT & MODERATIONF1. chat_messagesColumnTypeidUUID (PK)batch_idUUIDcourse_idUUIDsender_idUUIDsender_roleENUMmessage_typeENUM (text, image, video, system)contentTEXTis_editedBOOLEANis_deletedBOOLEANcreated_atTIMESTAMPupdated_atTIMESTAMPF2. chat_blocksColumnTypeidUUID (PK)batch_idUUIDstudent_idUUIDblocked_byUUIDreasonTEXTcreated_atTIMESTAMPF3. chat_moderation_logsColumnTypeidUUID (PK)message_idUUIDadmin_idUUIDactionENUM (edit, delete)reasonTEXTcreated_atTIMESTAMPSECTION Gpayment_schema ‚Äì PAYMENTS & REFUNDSG1. transactionsColumnTypeidUUID (PK)user_idUUIDamountDECIMALtypeENUM (payment, refund)reference_idUUIDstatusENUM (success, failed)created_atTIMESTAMPSECTION Hnotification_schema ‚Äì NOTICES & ALERTSH1. notificationsColumnTypeidUUID (PK)titleVARCHARmessageTEXTtarget_roleENUMcreated_byUUIDcreated_atTIMESTAMPSECTION Ifile_schema ‚Äì FILE & MEDIA STORAGEI1. filesColumnTypeidUUID (PK)original_nameVARCHARstored_nameVARCHARmime_typeVARCHARsizeBIGINTuploaded_byUUIDcreated_atTIMESTAMPSECTION Jaudit_schema ‚Äì AUDIT & GOVERNANCEJ1. audit_logsColumnTypeidUUID (PK)actor_idUUIDactionTEXTentityTEXTentity_idUUIDmetadataJSONBcreated_atTIMESTAMPüî• This table is immutableSECTION Ksystem_schema ‚Äì ENUMS & CONFIGSK1. system_enumsColumnTypeidUUIDenum_typeVARCHARenum_valueVARCHAR10. GLOBAL INDEXING (MANDATORY)Indexes on:users.emailenrollments.student_idchat_messages.batch_idtransactions.user_idaudit_logs.actor_idcustom_form_submissions.form_id11. FINAL DATABASE AUTHORITY RULENothing is deletedEverything is traceableEvery action has an ownerEvery mistake is recoverableThe database protects the systemThe API enforces the rules‚úÖ END OF MODULE 9 ‚Äì COMPLETE & FINAL
----------------------------------------

